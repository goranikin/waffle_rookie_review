---
title: Next.js ì•± CI/CD êµ¬ì¶•í•˜ê¸° (Bun, GitHub Actions, CodeDeploy)
publishDate: 2025-03-02
description: Next.jsì™€ Bunìœ¼ë¡œ ë§Œë“  ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë°°í¬í•©ë‹ˆë‹¤. Vercelì´ ì•„ë‹Œ AWSì˜ EC2ë¥¼ ì´ìš©í•˜ê³ , nginxì™€ pm2ë¥¼ í†µí•´ ì„œë²„ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.
thumbnailUrl: /development/setup-ci-cd-with-codedeploy-github-actions/1.png
---

ìˆ˜ì • ì‚¬í•­ì´ ìˆì„ ë•Œë§ˆë‹¤ ë§¤ë²ˆ EC2 ì¸ìŠ¤í„´ìŠ¤ì— ë“¤ì–´ê°€ ë ˆí¬ì§€í† ë¦¬ë¥¼ í´ë¡ í•˜ê³  ë¹Œë“œí•˜ëŠ” ê±´ ë²ˆê±°ë¡œìš´ ê³¼ì •ì´ë‹¤. ê·¸ë˜ì„œ ë°°í¬ë¥¼ ìë™í™”í•´ ì£¼ëŠ” ì‘ì—…ì„ í†µí•´ ìˆ˜ê³ ë¡œì›€ì„ ëœ ìˆ˜ ìˆë‹¤. í”íˆ CI/CDë¡œ ë¶€ë¥´ëŠ”ë° ìš©ì–´ê°€ ë­”ì§€ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ì.

Continuous Integration

- ì½”ë“œì˜ ë³€ê²½ì‚¬í•­ì„ í•©ì³ì„œ ë¹Œë“œí•˜ê³  í…ŒìŠ¤íŠ¸í•˜ëŠ” ê³¼ì •ì„ ë§í•œë‹¤. ìˆ˜ì • ì‚¬í•­ì´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í„°ì¹œë‹¤ë©´ CIì—ì„œ ë§‰íˆëŠ” ì…ˆì´ë‹¤.

Continuous Delivery & Deployment

- CI ë‹¨ê³„ë¥¼ í†µê³¼í•œ ìˆ˜ì • ì‚¬í•­ì„ ë°°í¬í•œë‹¤. ìµœì¢… ë°°í¬ë¥¼ ìˆ˜ë™ìœ¼ë¡œ íŠ¸ë¦¬ê±°í•˜ë©´ Delivery, ìë™ìœ¼ë¡œ í•˜ë©´ Deploymentë¼ ë¶€ë¥¸ë‹¤.

CI/CDëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŒŒì´í”„ë¼ì¸ìœ¼ë¡œ êµ¬ì„±ëœë‹¤.

1. ì½”ë“œ ë³€ê²½
2. ë¹Œë“œ
3. í…ŒìŠ¤íŠ¸
4. ë°°í¬ ì¤€ë¹„
5. ë°°í¬

ì´ë²ˆ í¬ìŠ¤íŠ¸ì—ì„œëŠ” ìœ„ íŒŒì´í”„ë¼ì¸ ì‘ì—…ë“¤ì„ ìë™í™”í•  ê²ƒì´ë‹¤. ë‚´ í”„ë¡œì íŠ¸ëŠ” Bunì„ ì´ìš©í•´ ì§„í–‰í•˜ë¯€ë¡œ npmì´ë‚˜ yarn íŒ¨í‚¤ì§€ ê´€ë¦¬ë¥¼ ì“°ê³  ëŸ°íƒ€ì„ í™˜ê²½ì„ node.jsë¡œ ì“´ë‹¤ë©´ ì ì ˆí•˜ê²Œ ë°”ê¿”ì¤˜ì•¼ í•œë‹¤!

---

### YAML

YAMLì€ JSONì˜ ìƒìœ„ í˜¸í™˜ ë¬¸ë²•ìœ¼ë¡œ ë³´í†µ configuration ì‘ì—…ì— ë§ì´ ì“°ì¸ë‹¤. ìë™ ë°°í¬ë¥¼ ìœ„í•´ ì„¤ì •í•´ ì£¼ëŠ” ë°ì´í„° íŒŒì¼ë„ ì „ë¶€ YAML ë¬¸ë²•ìœ¼ë¡œ ì“°ì¸ë‹¤. ê°„ë‹¨í•˜ê²Œ YAML ë¬¸ë²•ì— ëŒ€í•´ ì†Œê°œí•˜ìë©´...

```bash
# ì£¼ì„ì„ ì§€ì›í•œë‹¤!

# '', "" ëª¨ë‘ ì§€ì›í•œë‹¤. \nê°™ì€ ì´ìŠ¤ì¼€ì´í”„ ë¬¸ìë‚˜ :ê°™ì€ yaml ë¬¸ë²•ì— ì“°ì´ëŠ” ê¸°í˜¸ë¥¼ ì“¸ ë• quoteë¡œ ê°ì‹¸ì•¼ í•œë‹¤.
# í”„ë¡œí¼í‹° ì´ë¦„ì— ë„ì–´ì“°ê¸°ë„ ê°€ëŠ¥í•˜ë‹¤.
example: 'with quotes'
example: without quotes

# >, | ë¥¼ ì‚¬ìš©í•´ ê¸´ ë¬¸ì¥ì„ í‘œí˜„í•  ìˆ˜ ìˆë‹¤. >ëŠ” space, |ëŠ” \n ì—­í• ì´ë‹¤.

í•œê¸€ë„: ì§€ì›í•œë‹¤ëŠ” ì‚¬ì‹¤

# nullì„ ì‚¬ìš© ê°€ëŠ¥í•˜ë©°, ~ ê¸°í˜¸ë¡œ ë‹¨ì¶• í‘œí˜„í•  ìˆ˜ ìˆë‹¤.
null value: null
null shorthand: ~

# ë°°ì—´ì€ - ë¡œ êµ¬ë¶„í•œë‹¤.
array:
    - apple
    - banana
    - 12345
    - a: b

# json ìŠ¤íƒ€ì¼ë„ ê°€ëŠ¥í•˜ë‹¤. ê·¸ëŸ¬ë‚˜ jsonì˜ ë°°ì—´ ê¸°ëŠ¥ì„ ë³´ì™„í•˜ëŠ”ë° ìˆì–´ yamlì˜ ì¥ì ì´ ìˆë‹¤ëŠ” ì‚¬ì‹¤.
# ë”°ì˜´í‘œë‚˜ ì‰¼í‘œë¥¼ ì“°ì§€ ì•Šê¸° ìœ„í•´ yamlì´ í•˜ì´í”ˆì„ ë§Œë“¤ì—ˆìœ¼ë‹ˆ ìœ„ì²˜ëŸ¼ ì‚¬ìš©í•˜ì.
json style array: [
    apple,
    'banana',
    12345,
    a: b,
]

# ê°ì²´ëŠ” ë“¤ì—¬ì“°ê¸°ì™€ :ë¡œ êµ¬ë¶„
object:
    name: namu wiki
    type: dictionary
    primary color:
        gradient:
            start: 0x00A495
            end: 0x13AD65
        header: 0x008275

# ë§ˆì°¬ê°€ì§€ë¡œ ë”°ì˜´í‘œì™€ ì‰¼í‘œ, ì¤‘ê´„í˜¸ê°™ì€ ë‚­ë¹„ë¥¼ ì—†ì• ê¸° ìœ„í•´ yamlì´ ìˆìœ¼ë‹ˆ ìœ„ì²˜ëŸ¼ ì“°ë„ë¡ í•˜ì.
json style object: {
    name: namu wiki,
    "type": "dictionary",
}

implicit null: # ì´ëŸ¬ë©´ ì•”ë¬µì ìœ¼ë¡œ nullì´ ë“¤ì–´ê°„ë‹¤.
```

ì´ ì™¸ì—ëŠ” ê³µì‹ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤! ì•„ë‹ˆë©´ ë‚˜ë¬´ìœ„í‚¤ì—ë„ ì˜ ì„¤ëª… ë˜ì–´ìˆìœ¼ë‹ˆ ì°¸ê³ í•˜ê¸¸...

---

### GitHub Actions

GitHub ActionsëŠ” CI/CDë¥¼ ë„ì™€ì£¼ëŠ” ë„êµ¬ë‹¤. ì–´ë–¤ ì‹ìœ¼ë¡œ ì“°ëŠ”ì§€ https://docs.github.com/ko/actions/writing-workflows/quickstart ë¥¼ ë”°ë¼ í•˜ë©´ ë°”ë¡œ ëŠë‚Œì´ ì˜¨ë‹¤!

GitHub Actionsì™€ YAMLì— ëŒ€í•´ ì‘ì„±í•œ ê¸€ì´ ìˆìœ¼ë‹ˆ ê¶ê¸ˆí•˜ë©´ ë³´ì‹œê¸¸~ (https://hyeokrani.tistory.com/117)

í•œ ë²ˆ CIë¥¼ ìœ„í•œ íŒŒì¼ì„ ë§Œë“¤ê³  ë ˆí¬ì§€í† ë¦¬ì— push í•´ë³´ì.

```yaml
name: ci

on:
  pull_request:
    branches:
      - main
  push:
    branches:
      - main

jobs:
  ci:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v4
      - name: Setup Bun
        run: |
          curl -fsSL https://bun.sh/install | bash
          echo "BUN_INSTALL=$HOME/.bun" >> $GITHUB_ENV
          echo "PATH=$HOME/.bun/bin:$PATH" >> $GITHUB_ENV
      - name: Install dependencies
        run: bun install
      - name: Check
        run: bun check
```

ì´ workflowëŠ” main ë¸Œëœì¹˜ë¡œì˜ pushë‚˜ PRì— ì‘ë™í•œë‹¤. ì–´ë–¤ ì‘ì—…ë“¤ì´ ì‹œí–‰ë˜ëŠ”ì§€ ë³´ë©´,

1. ë ˆí¬ì§€í† ë¦¬ë¥¼ í´ë¡  í•œë‹¤.
2. Bunì„ ì„¤ì¹˜í•œë‹¤.
3. Bunìœ¼ë¡œ ì˜ì¡´ì„±ì„ ì„¤ì¹˜í•œë‹¤.
4. ì½”ë“œë¥¼ ê²€ì‚¬í•œë‹¤.

ìœ„ ê³¼ì •ì´ ì˜ ì¼ì–´ë‚˜ëŠ”ì§€ ë¸Œëœì¹˜ë¥¼ ìƒì„±í•´ PRì„ ì˜¬ë ¤ë³´ì.

![](/development/setup-ci-cd-with-codedeploy-github-actions/1.png)
![](/development/setup-ci-cd-with-codedeploy-github-actions/2.png)

workflowê°€ ì˜ ì‘ë™í–ˆê³ , ì½”ë“œ ê²€ì‚¬ë„ ì„±ê³µì ìœ¼ë¡œ ì˜ ëë‚œ ê±¸ ë³¼ ìˆ˜ ìˆë‹¤.
ì´ì œ ì•ìœ¼ë¡œ main ë¸Œëœì¹˜ì— PRë¡œ ì˜¬ë ¤ì£¼ë©´ CI ì„±ê³µ ì—¬ë¶€ë¥¼ ë³´ê³  í•©ì¹  ìˆ˜ ìˆë‹¤.

---

ìˆ˜ì •í•œ ì½”ë“œê°€ ê¸°ì¡´ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ í„°ì¹  ê°€ëŠ¥ì„±ì„ í™•ì¸í–ˆìœ¼ë‹ˆ, ì´ì œ ìˆ˜ì •ëœ ì½”ë“œë¥¼ ì¸ìŠ¤í„´ìŠ¤ì— ì˜¬ë ¤ ë°°í¬í•˜ëŠ” ê³¼ì •ì„ ìë™í™”í•˜ë©´ ëœë‹¤.

ìë™ ë°°í¬ì˜ íŒŒì´í”„ë¼ì¸ì€ ì–´ë–»ê²Œ ë ê¹Œ?

![](/development/setup-ci-cd-with-codedeploy-github-actions/3.png)
ì²« ì‹œì‘ì€ GitHub repositoryì˜ main ë¸Œëœì¹˜ì— ë³€ê²½ì‚¬í•­ì´ ìƒê¸°ë©´ GitHub Actionsë¥¼ íŠ¸ë¦¬ê±°í•˜ë„ë¡ ì„¤ì •í•œë‹¤.

ì´í›„ GitHub ActionsëŠ”

1. í”„ë¡œì íŠ¸ íŒŒì¼ì„ ë¹Œë“œí•˜ê³ 
2. ë¹Œë“œ íŒŒì¼ì„ ì••ì¶• í›„ S3 Bucketì— ì—…ë¡œë“œí•œ ë’¤
3. CodeDeployê°€ ì •í•´ì§„ ë™ì‘ì„ í•˜ë„ë¡ íŠ¸ë¦¬ê±°í•œë‹¤.

CodeDeployëŠ” EC2 instance ë‚´ì— Code Deploy Agentë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´

1. S3ì— ì˜¬ë¼ì˜¨ íŒŒì¼ì„ ë‹¤ìš´ë¡œë“œí•˜ê³ 
2. ì••ì¶•ì„ í•´ì œí•´ í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ì„¤ì¹˜í•œ ë’¤
3. ì •í•´ì§„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰í•œë‹¤.

ì´ë•Œ ìŠ¤í¬ë¦½íŠ¸ëŠ” ì„¤ì¹˜ ì „ í›„ë¡œ ì •ì˜í•´ ì¤„ ìˆ˜ ìˆìŒ!

ì—¬ê¸°ì„œ ìƒê¸°ëŠ” ê¶ê¸ˆì ì´ ë‘ ê°œ ìˆë‹¤.

Q1. ì™œ ì˜ì¡´ì„± ì„¤ì¹˜ë¶€í„° ë¹Œë“œí•˜ëŠ” ê³¼ì •ì„ EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ì§ì ‘ í•˜ì§€ ì•Šê³ , GitHub Actionsì˜ ê°€ìƒ ë¨¸ì‹ ì—ì„œ ì‹¤í–‰í• ê¹Œ?
Q2. ë¹Œë“œí•œ íŒŒì¼ì„ ì••ì¶•í•œ ë’¤ ê³§ì¥ EC2 ì¸ìŠ¤í„´ìŠ¤ë¡œ ë³´ë‚´ì§€ ì•Šê³ , S3ë¡œ ì˜¬ë¦¬ëŠ” ì´ìœ ê°€ ë­˜ê¹Œ?

Q1ë²ˆì— ëŒ€í•´ì„œ AIì—ê²Œ ì–»ì–´ë‚¸ ë‹µì€ ì´ë ‡ë‹¤. (í‹€ë¦° ê²Œ ìˆë‹¤ë©´ ì§€ì í•´ ì£¼ì„¸ìš”!)

A1-1) ì˜ì¡´ì„± ì„¤ì¹˜ ë° ë¹Œë“œ ê³¼ì •ì„ GitHub Actions runnerì˜ í†µì¼ëœ í™˜ê²½ì—ì„œ ì‹¤í–‰í•´ ì¼ê´€ì„±ì„ ë†’ì¸ë‹¤. ë¡œì»¬ì´ë‚˜ ì„œë²„ í™˜ê²½ì€ ìƒí™©ë§ˆë‹¤ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìœ¼ë¯€ë¡œ! (ëŒ€ì‹  ì´ê±´ ë„ì»¤ë¥¼ í™œìš©í•˜ë©´ í›¨ì”¬ ì¢‹ì„ ë“¯)
A1-2) ìš°ë¦¬ì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì„œë²„ ì—…ë¬´ìš©! ì„œë²„ ëŒë¦¬ëŠ” ë° ì“°ì´ëŠ” ë©”ëª¨ë¦¬ë¥¼ êµ³ì´ ë ˆí¬ì§€í† ë¦¬ í´ë¡ í•˜ê³  í”„ë¡œì íŠ¸ ë¹Œë“œí•˜ëŠ” ë° ì“¸ ì´ìœ ê°€ ì—†ë‹¤. ì„œë²„ìš© ì»´í“¨í„°ëŠ” ì„œë²„ ì—…ë¬´ì—ë§Œ ì§‘ì¤‘í•˜ê²Œ í•´ì„œ ë©”ëª¨ë¦¬ ë¶€ë‹´ë„ ì¤„ì´ê³ , ê´€ë¦¬ ì¸¡ë©´ì—ì„œë„ ì±…ì„ ì†Œì¬ë¥¼ í™•ì‹¤íˆ í•˜ì. (ê·¸ë¦¬ê³  ìš°ë¦¬ì˜ ê³„ì •ì€ í”„ë¦¬í‹°ì–´! ì•„ê¸°ìê¸°í•œ ë©”ëª¨ë¦¬ì™€ CPUë¥¼ ìœ„í•´ì„œ ìµœëŒ€í•œ ë¶€ë‹´ì„ ì¤„ì—¬ì•¼ í•œë‹¤.)

Q2ë²ˆì— ëŒ€í•´ì„œ ìš°ì„  ì••ì¶• íŒŒì¼ì„ ë³´ë‚´ëŠ” ì´ìœ ëŠ” ì¸ìŠ¤í„´ìŠ¤ì˜ ë„¤íŠ¸ì›Œí¬ ë¶€í•˜ë¥¼ ì¤„ì´ê¸° ìœ„í•¨ë„ ìˆì§€ë§Œ, ê¸°ë³¸ì ìœ¼ë¡œëŠ” ì••ì¶• ì•Œê³ ë¦¬ì¦˜ì´ íš¨ìœ¨ì ì´ê¸° ë•Œë¬¸ì´ë‹¤. ì••ì¶•ê³¼ í•´ì œì— ì†Œìš”ë˜ëŠ” ì‘ì—… ì‹œê°„ê³¼ ë¶€í•˜ê°€ ìƒ íŒŒì¼ì„ ë„¤íŠ¸ì›Œí¬ë¡œ ì „ì†¡í•˜ëŠ” ê²ƒë³´ë‹¤ ë” ë‚«ë‹¤!

A2-1) ë¹Œë“œëœ ë°°í¬ íŒŒì¼(Artifact)ì„ ê°œì¸ì ì¸ ê³µê°„ì¸ ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ê´€ë¦¬í•˜ê¸°ë³´ë‹¤, ì¤‘ì•™í™”ëœ ì €ì¥ì†Œì¸ S3 Bucketì— ë†“ì•„ ê´€ë¦¬ë¥¼ ìš©ì´í•˜ê²Œ í•œë‹¤. ì¼ê´€ì„±ì´ë‚˜ ì¬ì‚¬ìš©ì„±, ì‹¤íŒ¨ ì‹œ ë³µêµ¬ ë“±ì„ í›¨ì”¬ ì•ˆì •ì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤. (ì¤‘ìš”í•œ íŒŒì¼ì„ í•˜ë“œë””ìŠ¤í¬ì— ì €ì¥í•˜ëŠ” ê²ƒì²˜ëŸ¼!)
A2-2) ë¹Œë“œì™€ ë°°í¬ ë‹¨ê³„ë¥¼ ë¶„ë¦¬í•œë‹¤. ì¤‘ê°„ì— S3ë¥¼ ë‘ê³  ì—…ë¡œë“œ ì „ê¹Œì§€ëŠ” ë¹Œë“œ ë° í…ŒìŠ¤íŠ¸ ê³¼ì •, ì—…ë¡œë“œ í›„ì—ëŠ” EC2 ì¸ìŠ¤í„´ìŠ¤ê°€ ì‹¤í–‰í•˜ëŠ” ë°°í¬ ê³¼ì •ìœ¼ë¡œ ëª…í™•íˆ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.

ì´ì œ ì´ìœ ë¥¼ ì•Œì•˜ìœ¼ë‹ˆ ì‹¤í–‰í•˜ëŸ¬ ê°€ë³´ì!

---

### 1. Bucket ìƒì„± ë° GitHub Actionsê°€ ì‚¬ìš©í•  IAM ê³„ì • ìƒì„±

ìš°ì„  ì••ì¶•í•œ ë¹Œë“œ íŒŒì¼ì„ ì˜¬ë¦´ bucketì„ ìƒì„±í•˜ì.

![](/development/setup-ci-cd-with-codedeploy-github-actions/4.png)

rookie-review-ci-cdë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë§Œë“¤ì—ˆë‹¤.

ê·¸ë¦¬ê³  GitHub Actionsê°€ ì‚¬ìš©í•  IAM ê³„ì •ì„ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ì´ ê³„ì •ì€ S3ì™€ CodeDeployì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ê¶Œí•œì´ ìˆì–´ì•¼ í•œë‹¤.

![](/development/setup-ci-cd-with-codedeploy-github-actions/5.png)

AmazonS3FullAccess, AWSCodeDeployFullAccess ë‘ ì •ì±…ì„ í• ë‹¹í•œ ë’¤, GitHub Actionsê°€ ì´ ê³„ì •ì— ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ Access keyë¥¼ ë°œê¸‰ë°›ì.

ì–´ë–¤ ë¸”ë¡œê·¸ì—ì„œëŠ” EC2ì—ë„ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ì •ì±…ì„ í• ë‹¹í–ˆëŠ”ë°, GitHub ActionsëŠ” ì§ì ‘ì ìœ¼ë¡œ EC2ì— ì ‘ê·¼í•˜ì§€ ì•ŠëŠ”ë‹¤. EC2ì—ëŠ” CodeDeployê°€ ì ‘ê·¼í•˜ë¯€ë¡œ ì´ ê³„ì •ì—ëŠ” CodeDeployì— ëŒ€í•œ ì •ì±…ë§Œ í• ë‹¹í•´ ì£¼ë©´ ëœë‹¤.

ì´í›„ GitHub ë ˆí¬ì§€í† ë¦¬ì˜ Setting > Secrets and variables > Actionsë¡œ ì´ë™í•´ Access keyë¥¼ Repository Secretsì„ ë“±ë¡í•˜ì.

![](/development/setup-ci-cd-with-codedeploy-github-actions/6.png)

---

### 2. EC2ì™€ CodeDeployì— í• ë‹¹í•  ì—­í•  ìƒì„±

EC2ì™€ CodeDeployê°€ AWS ë‚´ì—ì„œ í™œë™í•˜ê¸° ìœ„í•´ ì •ì±…ì„ í• ë‹¹ë°›ì•„ì•¼ í•œë‹¤. ì •ì±…ë“¤ì„ ëª¨ì•„ë†“ì€ ì—­í• ì„ ë§Œë“¤ì–´ ì§€ì •í•´ ì£¼ë©´ ëœë‹¤.

EC2ëŠ” ì–´ë–¤ ì •ì±…ì´ í•„ìš”í• ê¹Œ?

1. S3ì— ì—…ë¡œë“œëœ ì•„í‹°íŒ©íŠ¸ë¥¼ ë‹¤ìš´ë¡œë“œ ë°›ì•„ì•¼ í•œë‹¤. -> AmazonS3ReadOnlyAccess
2. EC2 ì¸ìŠ¤í„´ìŠ¤ì—ì„œ CodeDeploy Agentê°€ ì‘ë™í•  ë•Œ í•„ìš”í•œ ê¶Œí•œì´ ìˆì–´ì•¼ í•œë‹¤. -> AmazonEC2RoleforAWSCodeDeploy

![](/development/setup-ci-cd-with-codedeploy-github-actions/7.png)
![](/development/setup-ci-cd-with-codedeploy-github-actions/8.png)

ê·¸ë¦¬ê³  CodeDeployì— í•„ìš”í•œ ì—­í• ë„ ë§Œë“¤ì–´ì£¼ì.

![](/development/setup-ci-cd-with-codedeploy-github-actions/9.png)

ì–˜ëŠ” ìš”ê±° í•˜ë‚˜ë§Œ ìˆìœ¼ë©´ ëœë‹¤.

---

3. CodeDeploy ì• í”Œë¦¬ì¼€ì´ì…˜ ë° ë°°í¬ ê·¸ë£¹ ìƒì„±

CodeDeployì— ë“¤ì–´ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ìƒì„±í•˜ì.
![](/development/setup-ci-cd-with-codedeploy-github-actions/10.png)

CodeDeplooyë¥¼ ì´ìš©í•´ EC2ì— ë°°í¬í•  ê²ƒì´ë¯€ë¡œ EC2/On-premisesë¡œ í”Œë«í¼ì„ ì§€ì •í•˜ì.

ë°°í¬ ê·¸ë£¹ì„ ìƒì„±í•˜ì.

![](/development/setup-ci-cd-with-codedeploy-github-actions/11.png)
![](/development/setup-ci-cd-with-codedeploy-github-actions/12.png)
![](/development/setup-ci-cd-with-codedeploy-github-actions/13.png)

ê·¸ë£¹ì— ì•„ê¹Œ ìƒì„±í•œ ì—­í• ì„ ì§€ì •í•´ ì£¼ê³ , ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì—°ê²°í•´ ì£¼ì. ë¡œë“œ ë°¸ëŸ°ì„œëŠ” ìš°ì„  ì²´í¬ í•´ì œí•´ ì£¼ì! (ë¹„ìš© ì ˆê°)

ì´í›„ GitHub Actionsì— í•„ìš”í•œ ì‚¬í•­ë“¤ì„ secretsì— ë“±ë¡í•´ ì£¼ì.

![](/development/setup-ci-cd-with-codedeploy-github-actions/14.png)

---

### 4. EC2 ì¸ìŠ¤í„´ìŠ¤ì— CodeDeploy Agent ì„¤ì¹˜

ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•œ ë’¤ ë‹¤ìŒ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ì.

```bash
sudo apt update
sudo apt install ruby-full
sudo apt install wget
cd /home/ubuntu
wget https://aws-codedeploy-ap-northeast-2.s3.ap-northeast-2.amazonaws.com/latest/install
chmod +x ./install

sudo ./install auto > /tmp/logfile (20.04 ë²„ì „)
```

CodeDeploy ì„¤ì¹˜ ë° ì‹¤í–‰ì„ ìœ„í•´ ruby-full, wgetì„ ì„¤ì¹˜í•´ì•¼ í•œë‹¤. ê·¸ì „ì— ë‘˜ì˜ íŒ¨í‚¤ì§€ ëª©ë¡ì„ ìµœì‹  ìƒíƒœë¡œ ì—…ë°ì´íŠ¸í•´ì¤€ë‹¤.

ìµœì‹  ë²„ì „ì¸ ubuntu 20.04 ë²„ì „ì˜ ê²½ìš° ì¶œë ¥ ë¡œê·¸ ì €ì¥ ê²½ë¡œë¥¼ ì§€ì •í•˜ëŠ” > /tmp/logfile ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•˜ë¼ê³  ê³µì‹ ë¬¸ì„œì— ë‚˜ì™€ìˆë‹¤.

ì•„ë˜ ëª…ë ¹ì–´ë¥¼ í†µí•´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

```bash
sudo service codedeploy-agent status
```

Active: active (running) -> ì •ìƒì ìœ¼ë¡œ CodeDeploy Agentê°€ ì‘ë™ ì¤‘ì— ìˆë‹¤!

---

### 5. GitHub Actionsì™€ CodeDeploy ì„¤ì •í•˜ê¸°

ì´ì œ GitHub Actionsê°€ ì‹¤í–‰í•´ ì¤„ ì‘ì—…ì„ ì •ì˜í•˜ì.

.github/workflows/deploy.yml

```yaml
name: deploy to S3

# main ë¸Œëœì¹˜ë¡œ push í•  ë•Œ workflow ì‹¤í–‰
on:
  push:
    branches:
      - main
  workflow_dispatch:

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
env:
  S3_BUCKET_NAME: ${{ secrets.S3_BUCKET_NAME }}
  CODE_DEPLOY_APPLICATION_NAME: ${{ secrets.CODE_DEPLOY_APPLICATION_NAME }}
  CODE_DEPLOY_DEPLOYMENT_GROUP_NAME: ${{ secrets.CODE_DEPLOY_DEPLOYMENT_GROUP_NAME }}

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      # ë ˆí¬ì§€í† ë¦¬ clone
      - name: Checkout
        uses: actions/checkout@v4

      # Bun ì„¤ì¹˜ ë° ê´€ë ¨ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
      - name: Setup Bun
        run: |
          curl -fsSL https://bun.sh/install | bash
          echo "BUN_INSTALL=$HOME/.bun" >> $GITHUB_ENV
          echo "PATH=$HOME/.bun/bin:$PATH" >> $GITHUB_ENV

      # í”„ë¡œì íŠ¸ ì˜ì¡´ì„± ì„¤ì¹˜
      - name: Install dependencies
        run: bun install

      # Next.js ì•± ë¹Œë“œ
      - name: Build next app
        run: bun run build

      # ë¹Œë“œí•œ íŒŒì¼ê³¼ í”„ë¡œì íŠ¸ ì†ŒìŠ¤ë¥¼ ì••ì¶•í•´ .zip íŒŒì¼ë¡œ ë§Œë“¤ê¸°
      - name: Make zip file
        run: zip -qq -r ./rookie_review.zip . -x ".git/*"
        # -qq: quit ëª¨ë“œë¡œ ì‹¤í–‰ (ì—ëŸ¬ë‚˜ ê²½ê³ ë©”ì„¸ì§€ë§Œ ì¶œë ¥í•˜ë„ë¡ í•¨)
        # -r: ì§€ì •ëœ ë””ë ‰í† ë¦¬ë¥¼ ì¬ê·€ì ìœ¼ë¡œ ì••ì¶• (í•˜ìœ„ ë””ë ‰í† ë¦¬ì™€ íŒŒì¼ë“¤ ëª¨ë‘ ì••ì¶•)
        # -x: ì§€ì •í•œ íŒŒì¼ë“¤ ì••ì¶• ê³¼ì •ì—ì„œ ì œì™¸í•˜ê¸°

      # Github Actionì—ì„œ AWSì˜ ê¶Œí•œ ìê²©ì„ ì–»ì–´ì˜¤ëŠ” ë‹¨ê³„
      - name: Configure AWS credentials
        uses: aws-actions/configure-aws-credentials@v2
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-region: ${{ secrets.AWS_REGION }}

      # ì••ì¶•ëœ íŒŒì¼ì„ S3ì— ì—…ë¡œë“œ
      - name: Upload to S3
        run: aws s3 cp --region ap-northeast-2 ./rookie_review.zip s3://${{ env.S3_BUCKET_NAME }}/rookie_review.zip
        # aws s3 cp: AWS CLI ëª…ë ¹ì–´ë¡œ íŒŒì¼ ë³µì‚¬
        # --region ap-northeast-2: ì—…ë¡œë“œ ëŒ€ìƒ ë¦¬ì „ ì„¤ì •
        # íŒŒì¼ì„ S3 ë²„í‚·ì˜ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì— ì—…ë¡œë“œ.

      # S3ì— ì—…ë¡œë“œ ëœ ë¹Œë“œ íŒŒì¼ì„ ì´ìš©í•´ CodeDeployê°€ ì •ì˜ëœ ë™ì‘ì„ í•˜ë„ë¡ íŠ¸ë¦¬ê±°
      - name: Code Deploy
        run: |
          aws deploy create-deployment \
          --application-name ${{ env.CODE_DEPLOY_APPLICATION_NAME }} \
          --deployment-config-name CodeDeployDefault.AllAtOnce \
          --deployment-group-name ${{ env.CODE_DEPLOY_DEPLOYMENT_GROUP_NAME }} \
          --s3-location bucket=$S3_BUCKET_NAME,bundleType=zip,key=rookie_review.zip
```

appspec.ymlì€ CodeDeployê°€ ì‹¤í–‰í•  ì‘ì—… ì„¤ì • íŒŒì¼ì´ë‹¤.

appspec.yml

```yaml
version: 0.0
os: linux

files:
  - source: /
    destination: /home/ubuntu/waffle_rookie_review
    overwrite: yes
permissions:
  - object: /home/ubuntu/waffle_rookie_review
    owner: ubuntu
    group: ubuntu
    mode: 755
hooks:
  BeforeInstall:
    - location: scripts/before-install.sh
      timeout: 300
      runas: ubuntu
  AfterInstall:
    - location: scripts/after-install.sh
      timeout: 300
      runas: ubuntu
```

ì—¬ê¸°ì„œ ë‚˜ëŠ” before-install.shë¥¼ ìƒì„±í•´ ìë™ë°°í¬ ì „, í”„ë¡œì íŠ¸ íŒŒì¼ì„ ì „ë¶€ ì§€ì›Œë²„ë¦¬ê³  ìƒˆë¡œ ì„¤ì¹˜í•˜ë„ë¡ í–ˆë‹¤.

scripts/before-install.sh

```bash
REPOSITORY=/home/ubuntu/waffle_rookie_review

# ëª¨ë“  íŒŒì¼ê³¼ ìˆ¨ê¹€ íŒŒì¼ ì‚­ì œ
find $REPOSITORY -mindepth 1 -delete
echo "Cleanup completed."
```

ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•´ì„œì¸ë°,

```bash
Message
The deployment failed because a specified file already exists at this location: /home/ubuntu/waffle_rookie_review/.gitignore
```

ë°°í¬ ê³¼ì •ì—ì„œ CodeDeployê°€ íŒŒì¼ì„ ë®ì–´ì”Œìš°ì§€ ì•Šê³  ì—ëŸ¬ë¥¼ ë±‰ì—ˆê¸° ë•Œë¬¸. overwrite: yes ì„ì—ë„ .gitignore ê°™ì€ ë¯¼ê°í•œ íŒŒì¼ë“¤ì€ ë®ì–´ì“°ì§€ ì•ŠëŠ” ê±¸ê¹Œ. ì •í™•íˆëŠ” ì˜ ëª¨ë¥´ê² ë‹¤. ì–´ì°¨í”¼ ê¸°ì¡´ íŒŒì¼ê³¼ ì¶©ëŒí•  ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ ì™„ì „íˆ ì‚­ì œí•˜ê³  ìƒˆë¡œ í”„ë¡œì íŠ¸ë¥¼ ê¹”ì•„ì£¼ëŠ” ê²Œ ì¢‹ê¸°ë„ í•˜ê³ .

ê·¸ë¦¬ê³  after-install.shë¥¼ ìƒì„±í•´ ë°°í¬ ì´í›„ ì •ìƒì ìœ¼ë¡œ pm2ê°€ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í–ˆë‹¤.

scripts/after-install.sh

```bash
REPOSITORY=/home/ubuntu/waffle_rookie_review
BUN_PATH=/home/ubuntu/.bun/bin/bun

cd $REPOSITORY || {
  echo "Error: Failed to navigate to project directory."
  exit 1
}

$BUN_PATH run deploy
```

ê·¸ë¦¬ê³  bun run deploy ëª…ë ¹ì–´ë¥¼ package.jsonì— ì¶”ê°€í•˜ë©´ ëœë‹¤.

```bash
"deploy": "pm2 start ecosystem.config.js --env production"
```

ë§ˆì§€ë§‰ìœ¼ë¡œ CodeDeployì˜ ë™ì‘ ì´í›„ pm2ê°€ ì •ìƒì ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì¬ì‹¤í–‰í•˜ë„ë¡ ì„¤ì •í•´ ì£¼ë©´ ëœë‹¤.

ecosystem.config.js

```javascript
module.exports = {
  apps: [
    {
      name: 'waffle_rookie_review', // ì•±ì˜ ì´ë¦„
      script: './node_modules/next/dist/bin/next', // Next.js ìŠ¤í¬ë¦½íŠ¸ ê²½ë¡œ
      args: 'start', // Next.js ì•±ì„ ì‹œì‘í•  ë•Œ ì‚¬ìš©í•  ì¸ìˆ˜
      exec_mode: 'fork', // ì‹¤í–‰ ëª¨ë“œ: cluster ë˜ëŠ” fork ì¤‘ ì„ íƒ
      instances: '1', // í´ëŸ¬ìŠ¤í„° ëª¨ë“œì—ì„œ ì‹¤í–‰í•  ì¸ìŠ¤í„´ìŠ¤ ìˆ˜ (CPU ì½”ì–´ ìˆ˜ë§Œí¼)
      autorestart: true, // í”„ë¡œì„¸ìŠ¤ ìë™ ì¬ì‹œì‘ í™œì„±í™”
      watch: true, // íŒŒì¼ ë³€ê²½ ê°ì§€ í™œì„±í™” (ê°œë°œ ì¤‘ì—ë§Œ í™œìš©)
      max_memory_restart: '1G', // 1GB ì´ìƒ ë©”ëª¨ë¦¬ ì‚¬ìš© ì‹œ ì¬ì‹œì‘
      interpreter: '/home/ubuntu/.bun/bin/bun',
      env: {
        NODE_ENV: 'production', // Node.js í™˜ê²½ ë³€ìˆ˜
        PATH: `${process.env.HOME}/.bun/bin:${process.env.PATH}`,
      },
    },
  ],
};
```

ì´ëŸ¬ë©´ ë!....ì¸ ì¤„ ì•Œì•˜ìœ¼ë‚˜ CodeDeployì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

```bash
LifecycleEvent - AfterInstall
Script - scripts/after-install.sh
[stderr]$ pm2 start ecosystem.config.js --env production
[stderr]/usr/bin/bash: line 1: pm2: command not found
[stderr]error: script "deploy" exited with code 127
```

scriptsì— ì íŒ pm2 ëª…ë ¹ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ”ë° pm2ë¥¼ ì°¾ì§€ ëª»í•´ ì—ëŸ¬ê°€ ë°œìƒí–ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ ì‹¬ë³¼ë¦­ ë§í¬ë¥¼ ì§€ì •í•´ ì£¼ë©´ ì‹œìŠ¤í…œ PATH í™˜ê²½ ë³€ìˆ˜ì— ì¶”ê°€í•  ìˆ˜ ìˆë‹¤.

```bash
sudo ln -s /home/ubuntu/.bun/bin/pm2 /usr/bin/pm2
sudo ln -s /home/ubuntu/.bun/bin/pm2 /usr/local/bin/pm2
```

pm2 ê²½ë¡œëŠ” ì„¤ì •ë§ˆë‹¤ ë‹¤ë¥¼ ìˆ˜ ìˆìœ¼ë‹ˆ which pm2ë¡œ í™•ì¸í•˜ê³  ì ì ˆí•˜ê²Œ ë°”ê¿”ì£¼ì.

---

### 6. ë¬¸ì œ í•´ê²°í•˜ê¸°

##### 1) í™˜ê²½ë³€ìˆ˜ íŒŒì¼

í™˜ê²½ë³€ìˆ˜ë¥¼ ì§€ì •í•˜ëŠ” .env íŒŒì¼ì€ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ .gitignoreì— ì§€ì •ë˜ì–´ ìˆë‹¤. ë¯¼ê°í•œ íŒŒì¼ë“¤ì€ ì™ ë¹¼ë†“ê³  ë¹Œë“œí•˜ê¸° ë•Œë¬¸ì— EC2 ì¸ìŠ¤í„´ìŠ¤ì˜ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ”ë‹¤. ê·¸ë˜ì„œ ì§ì ‘ ì›ê²© ì„œë²„ë¡œ ì•ˆì „í•˜ê²Œ ì „ì†¡í•˜ëŠ” Secure Copy Protocol(SCP)ë¥¼ ì‚¬ìš©í•´ ì˜®ê²¨ì£¼ë©´ ëœë‹¤.

```bash
scp -i <key.pem> .env <ec2-user>@<EC2_PUBLIC_IP>:/<target_directory>
```

key.pemì—ëŠ” ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ì†í•  ë•Œ ì“°ëŠ” í‚¤ì˜ ê²½ë¡œ,

ec2-userëŠ” ubuntu, target_directoryëŠ” ë‚´ ê²½ìš° /home/ubuntu/waffle_rookie_review ë‹¤.

ê·¸ëŸ°ë°..! ë­”ê°€ ì´ìƒí•¨ì„ ëŠê¼ˆë‹¤ë©´ ğŸ‘

ë°”ë¡œ CodeDeployì—ì„œ before-install.shì— í”„ë¡œì íŠ¸ë¥¼ ì „ë¶€ ë°€ì–´ë²„ë¦¬ëŠ” ëª…ë ¹ì–´ê°€ ìˆë‹¤! ê·¸ë˜ì„œ .env íŒŒì¼ë„ í•¨ê»˜ ì§€ì›Œì§€ë¯€ë¡œ ë‹¤ë¥¸ ë°©ë²•ì„ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

/home/ubuntu/env_backups ë””ë ‰í† ë¦¬ë¥¼ ë§Œë“¤ì–´ì£¼ê³  ì´ê³³ì— .env íŒŒì¼ì„ ì˜®ê²¨ì£¼ì.

```bash
mv /home/ubuntu/waffle_rookie_review/.env.local /home/ubuntu/env_backups
```

ê·¸ë¦¬ê³  after-install.shì— ë°±ì—… í´ë”ì—ì„œ ì„¤ì¹˜ëœ í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ .env íŒŒì¼ì„ ì˜®ê¸°ëŠ” ëª…ë ¹ì–´ë¥¼ ì¶”ê°€í•œë‹¤.

```bash
if [ -f "/home/ubuntu/env-backups/.env.local" ]; then
  echo "> Restoring .env.local file..."
  cp /home/ubuntu/env-backups/.env.local /home/ubuntu/waffle_rookie_review/.env.local || {
    echo "Error: Failed to restore .env.local file."
    exit 1
  }
else
  echo "Warning: No backup .env.local file found. Skipping restoration."
fi
```

##### 2) ë©”ëª¨ë¦¬ ë¶€ì¡±

```bash
No space left on device @ io_write - /opt/codedeploy-agent/deployment-root/a9949aba-cefa-4167-bc1b-0b0498d28232/d-1KKQEAKKA/bundle.tar
```

í”„ë¦¬í‹°ì–´ì˜ ëˆˆë¬¼... df -hë¥¼ ë³´ë©´ ë©”ëª¨ë¦¬ë¥¼ ì „ë¶€ ì‚¬ìš© ì¤‘ì¸ ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë©”ëª¨ë¦¬ë¥¼ ìµœì í™”í•˜ëŠ” ê²ƒë„ ë°©ë²•ì´ê² ì§€ë§Œ... ê·¸ëƒ¥ ë©”ëª¨ë¦¬ë¥¼ ëŠ˜ë ¤ì£¼ì.

ì¸ìŠ¤í„´ìŠ¤ë¡œ ë“¤ì–´ê°€ volumeì—ì„œ í˜„ì¬ ìš°ë¦¬ê°€ ë°°í¬í•œ ì¸ìŠ¤í„´ìŠ¤ê°€ ì‚¬ìš© ì¤‘ì¸ volumeì˜ í¬ê¸°ë¥¼ ëŠ˜ë ¤ì£¼ì.

![](/development/setup-ci-cd-with-codedeploy-github-actions/15.png)

ê·¸ë¦¬ê³  ì¸ìŠ¤í„´ìŠ¤ì—ì„œ ë””ìŠ¤í¬ì˜ ì²« ë²ˆì§¸ íŒŒí‹°ì…˜ í¬ê¸°ë¥¼ ëŠ˜ë ¤ì¤€ë‹¤.

```bash
sudo growpart /dev/xvda 1
```

ë‹¤ì‹œ df -hë¡œ í™•ì¸í•´ ë³´ë©´ ë©”ëª¨ë¦¬ê°€ ì—¬ìœ ë¡­ì—¬ì§„ ê±¸ ë³¼ ìˆ˜ ìˆë‹¤. ğŸ’°

##### 3) CodeDeployì˜ ë¬´í•œ ë¡œë”©

ì²˜ìŒ CodeDeployë¥¼ ì„¤ì •í•˜ê³  ë°°í¬ë¥¼ ê¸°ë‹¤ë¦¬ëŠ”ë° 3ë¶„ì´ ë„˜ë„ë¡ pending ìƒíƒœì˜€ë‹¤. ì–´ë–¤ ì—ëŸ¬ê°€ ë°œìƒí•˜ë©´ ê³ ì¹˜ê¸°ë¼ë„ í•˜ì§€ë§Œ ì´ ê²½ìš°ëŠ” ë‹µì´ ì—†ë‹¤. ì»´í“¨í„°ê°€ ë©ˆì¶”ë©´ ì–´ë–»ê²Œ í•˜ì‹œë‚˜ìš”? ì €ëŠ” ê»ë‹¤ ì¼­ë‹ˆë‹¤.

```bash
sudo systemctl stop codedeploy-agent
sudo systemctl start codedeploy-agent
```

ìŒìŒ. ì˜ ì‘ë™í•˜ë„¤ìš”.

---

### 7. ì´ëª¨ì €ëª¨

ì§€ê¸ˆê¹Œì§€ ëŒ€ë¶€ë¶„ WebStormì—ì„œ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³ , main branchë¡œ PR í•œ ë’¤ cië¥¼ ê±°ì³ ì •ìƒì ì¸ ì½”ë“œë§Œ ë³‘í•©í–ˆë‹¤. ìì˜í•œ ì˜¤íƒ€ ê°™ì€ ê±´ ë¡œì»¬ì—ì„œ prettierë¥¼ í†µí•´ ì¡ê¸°ë„ í•˜ê³ , GitHub Actionsì—ì„œë„ ì´ì¤‘ìœ¼ë¡œ ì¡ì•„ì£¼ê¸°ì— ì˜¤íƒ€ëŠ” ì „í˜€ ì‹ ê²½ ì“°ì§€ ì•Šì•˜ëŠ”ë°... ì´ë²ˆì—” ê·¸ëŸ° ê±° ì—†ë‹¤. ì˜¤íƒ€ë¡œ ì²˜ì ˆí•˜ê²Œ ë¬´ë„ˆì¡Œë‹¤.

1. CodeDeployì˜ ì‘ë™ì„ ì„¤ì •í•˜ëŠ” appspec.ymlì„ appsepc.ymlë¡œ ì˜ëª» ì ìŒ
2. í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì¸ waffle_rookie_reviewê°€ ì•„ë‹ˆë¼ rookie_reviewë¡œ ì˜ëª» ì§€ì •í•¨
3. Regionì¸ ap-northeast-2ë¥¼ ap-northeas-2ë¡œ ì˜¤íƒ€ëƒ„

ì´ ì™¸ì—ë„ ê¸°ì–µí•˜ì§€ ëª»í•˜ëŠ” ìˆ±í•œ ì˜¤íƒ€ê°€ ë‚˜ë¥¼ ê´´ë¡­í˜”ë‹¤. í›„...

ê·¸ë¦¬ê³  íŒ¨í‚¤ì§€ ë§¤ë‹ˆì € ê²¸ ëŸ°íƒ€ì„ í™˜ê²½ìœ¼ë¡œ Bunì„ ì‚¬ìš©í•˜ë©° ì–´ë ¤ì›€ì´ ìˆì—ˆë‹¤. ëŒ€ë¶€ë¶„ì˜ ë¸”ë¡œê·¸ë“¤ì´ npmì„ ì´ìš©í•˜ë‹¤ ë³´ë‹ˆ ì„¤ì •ì´ë‚˜ ëª…ë ¹ì–´ë“¤ì´ ëŒ€ë¶€ë¶„ npm ê¸°ì¤€ì´ì—ˆë‹¤.

ìì˜í•˜ê²Œ ëª…ë ¹ì–´ë¥¼ ê³ ì¹œ ê²ƒ ì™¸ì— ê°€ì¥ ì‹œê°„ì„ ë§ì´ ë¨¹ì—ˆë˜ ì—ëŸ¬ëŠ” ìë™ ë°°í¬ í›„ pm2 ë™ì‘ì„ ì„¤ì •í•˜ëŠ” ecosystem.config.jsì˜ ë¬¸ì œì˜€ë‹¤. ì•„ë¬´ ìƒê° ì—†ì´ node.js í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ë„ë¡ ë§Œë“¤ì–´ì§„ ì„¤ì •ì„ ê°–ë‹¤ ì“°ë‹ˆ CI/CDê°€ ëë‚  ë•Œë§ˆë‹¤ ì„œë²„ê°€ í„°ì¡Œë‹¤. ë¡œê·¸ë¥¼ ì‚´í´ë³´ë©´

```bash
0|waffle_r |     at TracingChannel.traceSync (node:diagnostics_channel:322:14)
0|waffle_r |     at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)
0|waffle_r |     at Module.require (node:internal/modules/cjs/loader:1311:12)
0|waffle_r |     at require (node:internal/modules/helpers:136:16)
0|waffle_r |     at Object.<anonymous> (/home/ubuntu/waffle_rookie_review/node_modules/.bin/next:6:1)
0|waffle_r |     at Module._compile (node:internal/modules/cjs/loader:1554:14)
0|waffle_r |     at Object..js (node:internal/modules/cjs/loader:1706:10)
0|waffle_r |     at Module.load (node:internal/modules/cjs/loader:1289:32) {
0|waffle_r |   code: 'MODULE_NOT_FOUND',
0|waffle_r |   requireStack: [ '/home/ubuntu/waffle_rookie_review/node_modules/.bin/next' ]
0|waffle_r | }
0|waffle_r |
0|waffle_r | Node.js v22.14.0
0|waffle_r | error: script "start" exited with code 1
0|waffle_r | $ next start
```

ì´ëŸ° ì‹ìœ¼ë¡œ node.jsì˜ ëª¨ë“ˆì„ ì°¾ì„ ìˆ˜ ì—†ë‹¤ê³  ë‚˜íƒ€ë‚¬ë‹¤. ì²˜ìŒì—ëŠ”
'ì•„, pm2ê°€ node.js í™˜ê²½ì„ í•„ìš”ë¡œ í–ˆì—ˆì§€. ê·¸ëŸ°ë° ë²„ì „ì´ 22.14ë„¤. ë­ì•¼! deploy.ymlì—ëŠ” 20.11.1 ë²„ì „ìœ¼ë¡œ ë¹Œë“œí•˜ì–ì•„.'
í•˜ê³  ê³§ì¥ ì¸ìŠ¤í„´ìŠ¤ì˜ node.js ë²„ì „ì„ 20.11.1ë¡œ ì§€ì •í–ˆë‹¤.

ê·¸ëŸ°ë°ë„ ì—¬ì „íˆ ë¬¸ì œê°€ ìˆì—ˆë‹¤.

í”„ë¡œì íŠ¸ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ì—ì„œ bun installì„ í•œ ë’¤ pm2 restart 0ìœ¼ë¡œ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë‹¤ì‹œ ì‹¤í–‰í•˜ë©´ ì •ìƒ ì‘ë™ë˜ì—ˆë‹¤. ê·¸ëŸ¼ ì˜ì¡´ì„± ë¬¸ì œì¸ê°€? ì‹¶ì€ë° node.js ë²„ì „ì„ ì´ì•¼ê¸°í•˜ê³ ... í•˜ë‹¤ê°€ ìˆœê°„ ì•„ì°¨ ì‹¶ì—ˆë‹¤. ë‚´ ëŸ°íƒ€ì„ í™˜ê²½ì€ Bunì¸ë°!! interpreterë¥¼ bun ê²½ë¡œë¡œ ì§€ì •í•´ ì£¼ë‹ˆ ë§ë”í•˜ê²Œ ë‹¤ì‹œ ì‘ë™í–ˆë‹¤.

ì§€ë‚˜ê³  ë³´ë©´ ë„ˆë¬´ ë‹¹ì—°í•˜ê³  ì‰¬ìš´ ë¬¸ì œì¸ë°... ì™œ ì´ë ‡ê²Œ ì˜¤ë˜ ëŒì•„ê°”ì„ê¹Œ. ê·¸ë˜ë„ ê¸°ê°€ë§‰íˆê²Œ ì‹¤ìˆ˜í•˜ê³  ì‹œê°„ ë‚­ë¹„í•˜ë©° ì œëŒ€ë¡œ ê¹¨ìš°ì³¤ë‹¤. ë‚´ê°€ ì •í™•íˆ ë¬´ìŠ¨ í™˜ê²½ì—ì„œ ì–´ë–¤ ëª…ë ¹ì–´ë¡œ ë¬´ì—‡ì„ ì‘ë™ì‹œí‚¤ëŠ”ì§€ ì•Œê²Œ ë˜ì—ˆìŒ! ì§€ê¸ˆì²˜ëŸ¼ ì§ì ‘ ì„œë²„ê¹Œì§€ ê±´ë“œë ¤ë³´ê³  ì‹œí–‰ì°©ì˜¤í•œ ë’¤ì— í† ì´í”„ë¡œì íŠ¸ë¥¼ í–ˆìœ¼ë©´ í›¨ì”¬ ì˜ ì°¸ì—¬í•  ìˆ˜ ìˆì—ˆì„í…ë°. ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ì´ê²Œ ì„œë²„ìª½ ë¬¸ì œì¸ì§€ í”„ë¡ íŠ¸ìª½ ë¬¸ì œì¸ì§€ ì•Œì•„ë³´ë ¤ëŠ” ë…¸ë ¥ì´ë¼ë„ í•  ìˆ˜ ìˆì—ˆì„í…ë°.

ê·¸ë˜ë„ ì–µì§€ë¡œ Bunì„ ì¨ë³´ë©° ë¶€ë”ªíŒ ê²Œ ì°¸ ì˜í•œ ì„ íƒì¸ ë“¯í–ˆë‹¤. ì´ê²Œ ì•„ë‹ˆì—ˆë‹¤ë©´ ì„œë²„ìª½ì´ ì–´ë–¤ ë°©ì‹ìœ¼ë¡œ ëŒì•„ê°€ëŠ”ì§€ ì´í•´í•˜ê²Œ ë§Œë“¤ì–´ì¤€ ì—ëŸ¬ë“¤ì„ ëª» ë§Œë‚¬ì„í…Œë‹ˆ!

---

ì´í›„ë¡œ ë„ë©”ì¸ êµ¬ë§¤í•´ì„œ ì—°ê²°í•˜ê³  https ì ‘ì† ì—°ê²°í•˜ê¸°... ëŠ” ê°„ë‹¨í•  ë“¯í•˜ê³  Dockerë¥¼ í•œ ë²ˆ ì¨ë³¼ ìƒê°ì¸ë°, ê·¸ ì „ì— ê¸°ëŠ¥ì„ ëª‡ ê°œ ê°œë°œí•œ ë’¤ì— í•  ìƒê°ì´ë‹¤. ê°„ë‹¨í•œ ë¸”ë¡œê·¸ë¥¼ êµ¬ì¶•í•´ë³´ê³  ì‹¶ì€ë° ì‹œê°„ì´ ë˜ë ¤ë‚˜ ëª¨ë¥´ê² ë„¤.
